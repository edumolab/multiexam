<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="theme-color" content="#fffff" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="manifest" href="manifest.json">
	<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z211EY4VM4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z211EY4VM4');
</script>
	<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<!-- Font Awesome -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  rel="stylesheet"
/>
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
  rel="stylesheet"
/>
<!-- MDB -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.2.0/mdb.min.css"
  rel="stylesheet"
/>
	<title>Auth Page</title>
	<style>
		body{
			background-color: rgb(83, 53, 110);
			color:white;
		}

		form{
			background-color: rgb(55, 8, 99);
		}

		#alert{
			display: none;
		}
	</style>
	
	<script type="text/javascript">
		function preventBack(){window.history.forward()};
		setTimeout("preventBack()",0);
		window.onunload=function(){null;}
	</script>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-12 mt-5 py-5">
				<h3 class="text-center py-2">Login Form</h3>
				<form id="login-form" class="rounded shadow-sm d-flex flex-column px-4 py-5">
					<p id="alert" class="py-1 rounded text-center" style="background-color:rgba(197, 8, 71, 0.993);color:white"></p>
					<div>
					  <label for="email">Email</label>
					  <input class="form-control" type="email" id="email" name="email" required autocomplete="email">
					</div>
					<div>
					  <label for="password">Password</label>
					  <input class="form-control" type="password" id="password" name="password" minlength="6" required autocomplete="password">
					</div>
					<div id="remember-me" class="mt-4">
						<label>Remember me</label>
						<input class="checkbox" type="checkbox">
					</div>
					<button class="btn btn-primary my-4" type="submit">Login</button>
					<a class="text-white pt-3 text-center" style="font-size: 16px;" href="https://t.me/javlon_developer" target="_blank">Biz bilan bog'lanish</a>
				  </form>
			</div><!---Login-ends-->
		</div>
	</div>
	
	  

	

	 
	 
<script>

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCPcm6WOfOOwzKBRBqNxgB71ea2TduQ-Qg",
  authDomain: "exam-online-384406.firebaseapp.com",
  projectId: "exam-online-384406",
  storageBucket: "exam-online-384406.appspot.com",
  messagingSenderId: "685614981927",
  appId: "1:685614981927:web:3cba11674fdc0391723f02",
  measurementId: "G-B2P1J1FSK7"
};

 // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries




		const emailInput = document.querySelector('#email');
		const passwordInput = document.querySelector('#password');
		const rememberMeCheckbox = document.querySelector('#remember-me');


  const loginForm = document.querySelector('#login-form');
  loginForm.addEventListener('submit', async (event) => {
    event.preventDefault();

      // Sign in user with email and password
      firebase.auth().signInWithEmailAndPassword(emailInput.value, passwordInput.value)
        .then(function(userCredential) {
        	localStorage.setItem('email', emailInput.value);
      		localStorage.setItem('password', passwordInput.value);
          console.log("Logged in successfully:", userCredential.user);
          // Save user details to the database
       var userData = {
       email: userCredential.user.email,
      uid: userCredential.user.uid
    };
    firebase.database().ref("users/" + userCredential.user.uid).set(userData);

          window.location.href = "index.html"; // Redirect to the home page on successful login
        })
      .catch(function(error) {
          console.log("Login error:", error);
          window.location.href="login.html"
          document.getElementById("alert").style.display="block"
      		document.getElementById("alert").innerHTML="Invalid Login Credential"
          // Add your code here to handle login errors (e.g., display error message)
        });
      
    
     
  });

  // Check if email and password are saved in localStorage and fill the input fields
const savedEmail = localStorage.getItem('email');
const savedPassword = localStorage.getItem('password');
if (savedEmail && savedPassword) {
  emailInput.value = savedEmail;
  passwordInput.value = savedPassword;
  rememberMeCheckbox.checked=true
}


</script>
</body>
</html>
