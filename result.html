<!DOCTYPE html>
<html>
<head>
	 <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Edumo Online Speaking Exam">
  <meta name="author" content="Kubayev Javlon">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <meta name="keywords" content="Exam Online, Multi Level, Speaking, IELTS, ingliz tili, Multi Level Speaking, Speaking exam">
    <!-- Font Awesome -->
<link
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
rel="stylesheet"
/>
<!-- Google Fonts -->
<link
href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
rel="stylesheet"
/>
<!-- MDB -->
<link
href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/#[[latestVersion]]#/mdb.min.css"
rel="stylesheet"
/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <title>Result</title>


	<title>Result</title>
	<style>
#yakuniy{
  padding: 20px;
}

#result{
  display:block;
  font-weight: bold;
  color: blue;
}
        
#feedback{
font-style: italic
}


.home-back{
    margin: 30px 0; 
  padding: 6px 18px;
  background: #0000ff;
  color: white;
  cursor: pointer;
  border-radius: 30px;
  border: 1px solid #0000ff;
}


.span{
  color:#0000ff;
}

mark{
  background-color:rgb(250, 235, 215);
}

.btn-container{
  width:100%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top:30px;
}

.subscribe-btn{
 padding: 8px 20px;
 border: 1px solid dodgerblue;
 border-radius: 30px;
 background: dodgerblue;
 width: 450px;
 font-size:23px;
 font-weight: bold;
 color:white;
 cursor:pointer;
}

@media screen and (max-width:660px) {
  .btn-container{
  width:100%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top:30px;
}

.subscribe-btn{
 padding: 8px 20px;
 width:300px;
 border: 1px solid dodgerblue;
 border-radius: 30px;
 background: dodgerblue;
 font-size:17px;
 font-weight: bold;
 color:white;
 cursor:pointer;
}

}

@media screen and (max-width:432px) {
  .btn-container{
  width:100%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin:30px 0;
}

.subscribe-btn{
 padding: 8px 20px;
 width:230px;
 border: 1px solid dodgerblue;
 border-radius: 30px;
 background: dodgerblue;
 font-size:16px;
 font-weight: bold;
 color:white;
 cursor:pointer;
}

}

.share-btn{
  background: dodgerblue;
  color: white;
  float: right;
  border: 1px solid dodgerblue;
  border-radius: 3px;
  padding: 8px;
  cursor: pointer;
  font-size:17px;
  margin:6px 0;
  width: 100%;
}


/*loader*/

#loader{
  
  width: 100%;
  position: absolute;
  min-height: 100vh;
  background: white;
}


.loader {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  display: block;
  margin:15px auto;
  position: absolute;
  left: 50%;
  top:50%;
  transform: translate(-50%, -50%);
  color: dodgerblue;
  box-sizing: border-box;
  animation: animloader 1s linear infinite alternate;
}

@keyframes animloader {
  0% {
    box-shadow: -38px -12px ,  -14px 0,  14px 0, 38px 0;
  }
  33% {
    box-shadow: -38px 0px, -14px -12px,  14px 0, 38px 0;
  }
  66% {
    box-shadow: -38px 0px , -14px 0, 14px -12px, 38px 0;
  }
  100% {
    box-shadow: -38px 0 , -14px 0, 14px 0 , 38px -12px;
  }
}


	</style>
</head>
<body>
<div class="container" id="yakuniy">
  <div class="row">
    <div class="col-md-12 my-5 py-3">
	    
          <!------------Yakuniy page----------------->
          <section  class="container">
		 <a class="text-decoration-none text-white" href="https://t.me/multilevel_speakApp" target="_blank"><button class="btn btn-primary my-3" style="border-radius: 30px;">Join Our Telegram Channel</button></a>
            <div id="result"></div>
            <div id="feedback"></div>

           <a href="https://multiexam.vercel.app/"><button class="home-back">Home Page</button></a>
          </section>

    </div>
  </div>



 <script>

  var userTranscript = localStorage.getItem('transcript');

        if (userTranscript === null) {
            document.getElementById("result").innerHTML = `Overall: 0/75`;
            document.getElementById("feedback").innerHTML = "You didn't provide any answer. Please speak and record your answers or check your microphone.";
        } else {
            console.log("Transcript:", userTranscript); // Check if userTranscript is retrieved correctly

            // Feature extraction functions
            function countWords(transcript) {
                return transcript.split(/\s+/).length;
            }

            function countSentences(transcript) {
                return transcript.split(/[.!?]/).length - 1;
            }

            // Calculate features
            const wordCount = countWords(userTranscript);
            const sentenceCount = countSentences(userTranscript);

            console.log("Word Count:", wordCount); // Check if wordCount is calculated correctly
            console.log("Sentence Count:", sentenceCount); // Check if sentenceCount is calculated correctly

// Simple scoring function with feedback messages
function scoreTranscript(words, sentences) {
  const wordsPerSentence = words / sentences;
    console.log(wordsPerSentence)

  if (wordsPerSentence > 1 && wordsPerSentence < 5) {
    return {
      score: randomBetween(1, 20),
      feedback: "Your speaking complexity is low. Try to use more varied vocabulary and sentence structures."
    };
  } else if (wordsPerSentence >= 5 && wordsPerSentence <= 15) {
    return {
      score: randomBetween(20, 45),
      feedback: "Your speaking complexity is moderate. Continue to improve by adding more details and examples."
    };
  } else if (wordsPerSentence > 15 && wordsPerSentence <= 30) {
    return {
      score: randomBetween(45, 60),
      feedback: "Your speaking complexity is good. Work on fluency and coherence for higher scores."
    };
  } else {
    return {
      score: randomBetween(60, 75),
      feedback: "Your speaking complexity is excellent. Keep up the good work!"
    };
  }
}

// Helper function to generate a random number between min and max (inclusive)
function randomBetween(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

// Calculate the score and feedback
const { score: userScore, feedback: userFeedback } = scoreTranscript(wordCount, sentenceCount);
document.getElementById("result").innerHTML = `Overall: ${userScore}/75`;
document.getElementById("feedback").innerHTML = userFeedback;

}



</script>
</body>
</html>
