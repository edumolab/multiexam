<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <!-- Font Awesome -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  rel="stylesheet"
/>
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
  rel="stylesheet"
/>
<!-- MDB -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.3.0/mdb.min.css"
  rel="stylesheet"
/>  

  <title>Word</title>
  <style>
    
.container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

#gameCard{
  display: none;
}

.flashcard {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 72px;
  border: 2px solid darkviolet;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  background-color: white;
}

.word-container {
  font-size: 32px;
  margin-bottom: 16px;
}


#progress-container {
  width: 100%;
  height: 8px;
  background-color: white;
  border: 1px solid blueviolet;
  border-radius: 30px;
  overflow: hidden;
  margin-top: 16px;
}

#progress {
  height: 100%;
  background-color: blueviolet;
  transition: width 0.5s ease;
}

#play{
  color: darkviolet;
  font-weight: bold;
  cursor: pointer;
  font-size: 23px;
  margin: 8px 0;
}



.score{
  border-radius: 50%;
  width: 60px;
  height: 60px;
  background-color: darkviolet;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: white;
  font-size: 23px;
  font-weight: bold;
}

.stars{
  display: flex;
  justify-content: center;
  align-items: center;
  font-size:50px;
  color: orange;
  margin-top: 50px;
}

.star-center{
  display:block;
  position: absolute;
  top:30px;
  animation-name: rotate-anim;
  animation-duration: 1s;
  animation-iteration-count: 1;
  transition-timing-function: ease;
}

.star-left{
  animation-name: rotate-anim-1;
  animation-duration: 1s;
  animation-iteration-count: 2;
  transition-timing-function: ease;
}

.star-right{
 animation-name: rotate-anim-1;
  animation-duration: 1s;
  animation-iteration-count: 2;
  transition-timing-function: ease;
}
.display{
  font-size: 40px;
}

.buttons{
  display: flex;
}
@media screen and (max-width:360px){
  .display{
  font-size: 30px;
}




@media screen and (max-width:280px){
  .display{
  font-size: 23px;
}

.buttons{
  display: flex;
  flex-direction: column;
  width: 100%;
}

}

#word-tr{
  font-size: 23px;
}

@keyframes rotate-anim{
  0%{
    transform: rotate(0deg);
  }
  100%{
    transform: rotate(90deg);
  }
}

@keyframes rotate-anim-1{
  0%{
    transform: rotate(0deg);
  }
  100%{
    transform: rotate(-90deg);
  }
}
</style>


</head>
<body>
<main class="container">
  <div id="welcome" class="card d-flex justify-content-center align-items-center">
    <div class="card-body p-5 text-center">
      <h4 class="fw-bold">Wordnik Game</h4>
      <p class="text-dark my-3">Ushbu bo'limda siz lug'atlarni o'yin shaklida o'rganasiz, so'z ijro etilgandan o'ng, o'sha so'zni to'g'ri talaffuz qilishga harakat qiling. Agar tayyor bo'lsangiz, "Start Game" tugmasini bosing!</p>
      <button class="btn btn-primary rounded" id="start-btn">Start Game</button>
    </div>
  </div>
  <section id="gameCard">
  <div class="flashcard card">
    <div  class="word-container card-body">
      <span id="word"></span>
    </div>
    <span id="word-tr"></span>
    <div id="play" class="badge-info rounded-circle shadow-lg text-center" style="width:40px; height: 40px"><i class="fa fa-volume-up"></i></div>
    <div class="my-3" id="feed"></div>
    <div id="progress-container">
      <div id="progress"></div>
    </div>
  </div>
</section>
<div id="scorePage" class="card shadow w-100 my-3 d-none" style="height: 450px;">
  <div class="card-body d-flex flex-column align-items-center">
    <div class="stars mt-4">
      <i class="fa fa-star star-left mx-4"></i>
      <i class="fa fa-star star-center"></i>
      <i class="fa fa-star star-right mx-4"></i>
    </div>
    <h5 class="display mt-5">Congratulations!</h5>
    <h5 id="score" class="score my-3">0</h5>
    <div class="buttons align-items-center">
      <button class="btn mx-2 my-2" style="background: #0ad1b0;" onclick="restart()"><i class="fa fa-refresh"></i> Restart</button>
      <button class="btn mx-2 my-2" style="background:#05def2" onclick="homeBack()"><i class="fa fa-home"></i> Home</button>
    </div>

  </div>
</div>
</main>
<audio id="audio"></audio>
<audio id="victory"  src="victory.mp3"></audio>

<audio id="audio" src=""></audio>
<script src="https://cdn.jsdelivr.net/npm/party-js@latest/bundle/party.min.js"></script>
<script>

 // Define the flashcards
const flashcards = [
  { word: "apple", trans: "olma", audio: "apple.mp3" },
  { word: "banana", trans: "banan", audio: "banana.mp3" },
  { word: "cherry", trans: "olcha", audio: "cherry.mp3" },
  { word: "orange", trans: "apelsin", audio: "orange.mp3" },
  { word: "apricot", trans: "o'rik", audio: "apricot.mp3" }
];

// Initialize variables
let currentFlashcard = 0;
let score = 0;
let progress = 0;

// Get the elements
const welcome = document.getElementById("welcome")
const feed = document.getElementById("feed")
const gameCard=document.getElementById("gameCard")
const scorePage= document.getElementById("scorePage")
const startBtn=document.getElementById("start-btn")
const wordContainer = document.getElementById("word");
const wordTr=document.getElementById("word-tr")
const scoreContainer = document.getElementById("score");
const audioElement = document.getElementById("audio");
const victory = document.getElementById("victory")
const progressContainer = document.getElementById("progress");
progressContainer.style.width = `${progress}%`;


// Function to start speech recognition
function startSpeechRecognition() {
  const recognition = new window.webkitSpeechRecognition();
  recognition.continuous = false;
  recognition.lang = "en-US";
  recognition.onresult = function(event) {
    const spokenWord = event.results[0][0].transcript.toLowerCase();
    if (spokenWord === flashcards[currentFlashcard].word) {
      score++;
      feed.innerText="ðŸŽ‰ Good!";
      feed.style.color="green"
      scoreContainer.innerText = score;
    } else {
      console.log("Oh no");
      feed.innerText="ðŸ˜‹ Oh,no!";
      feed.style.color="red"
    }
    nextFlashcard();
  };
  recognition.start();
}

// Function to move to the next flashcard
function nextFlashcard() {
  currentFlashcard++;
  progress += 20;
  progressContainer.style.width = `${progress}%`;
  if (currentFlashcard === flashcards.length) {
    scorePage.classList.remove("d-none");
    victory.play()
    gameCard.classList.add("d-none")

    /*
    currentFlashcard = 0;
    score = 0;
    scoreContainer.innerText = score;
    progress = 0;
    progressContainer.style.width = `${progress}%`;
    */
  }
  wordContainer.innerText = flashcards[currentFlashcard].word;
  wordTr.innerText= flashcards[currentFlashcard].trans;
  audioElement.src = flashcards[currentFlashcard].audio;
  audioElement.play();
  document.getElementById("play").addEventListener("click", ()=>{
   audioElement.play()
  })
  audioElement.onended = startSpeechRecognition;
}

// Set the initial word and audio
wordContainer.innerText = flashcards[currentFlashcard].word;
wordTr.innerText= flashcards[currentFlashcard].trans;
audioElement.src = flashcards[currentFlashcard].audio;
startBtn.addEventListener("click", function(){
  audioElement.play();
  welcome.classList.add("d-none")
  gameCard.style.display="flex"

})
audioElement.onended = startSpeechRecognition;

function restart(){
  window.location.reload()
}

function homeBack(){
  window.location.href="https://multiexam.vercel.app/home.html"
}
</script>

</body>
</html>